package com.practice.leetcode.codility;

import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                         LESSON 1: ITERATIONS                                 â•‘
 * â•‘                          BÃ i toÃ¡n vá» vÃ²ng láº·p                                â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Lesson nÃ y táº­p trung vÃ o viá»‡c sá»­ dá»¥ng vÃ²ng láº·p Ä‘á»ƒ giáº£i quyáº¿t bÃ i toÃ¡n.
 * ÄÃ¢y lÃ  bÆ°á»›c khá»Ÿi Ä‘á»™ng quan trá»ng Ä‘á»ƒ lÃ m quen vá»›i Codility.
 */
public class L1_Iterations {

    /**
     * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
     * â•‘                            BINARY GAP                                     â•‘
     * â•‘                     Khoáº£ng cÃ¡ch nhá»‹ phÃ¢n lá»›n nháº¥t                         â•‘
     * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * 
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ Äá»€ BÃ€I:                                                                    â”‚
     * â”‚ Cho má»™t sá»‘ nguyÃªn dÆ°Æ¡ng N, tÃ¬m binary gap dÃ i nháº¥t trong biá»ƒu diá»…n nhá»‹ phÃ¢nâ”‚
     * â”‚ Binary gap lÃ  chuá»—i cÃ¡c sá»‘ 0 liÃªn tiáº¿p náº±m giá»¯a hai sá»‘ 1                   â”‚
     * â”‚                                                                             â”‚
     * â”‚ VÃ Dá»¤:                                                                      â”‚
     * â”‚ â€¢ N = 1041 â†’ nhá»‹ phÃ¢n: 10000010001 â†’ binary gap dÃ i nháº¥t = 5               â”‚
     * â”‚   (chuá»—i 00000 náº±m giá»¯a hai sá»‘ 1)                                          â”‚
     * â”‚ â€¢ N = 15 â†’ nhá»‹ phÃ¢n: 1111 â†’ khÃ´ng cÃ³ binary gap â†’ return 0                 â”‚
     * â”‚ â€¢ N = 32 â†’ nhá»‹ phÃ¢n: 100000 â†’ khÃ´ng cÃ³ binary gap hoÃ n chá»‰nh â†’ return 0    â”‚
     * â”‚ â€¢ N = 529 â†’ nhá»‹ phÃ¢n: 1000010001 â†’ binary gap = 4                          â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     * 
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ PHÃ‚N TÃCH - TÆ¯ DUY GIáº¢I QUYáº¾T:                                              â”‚
     * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     * â”‚                                                                             â”‚
     * â”‚ ğŸ¯ HIá»‚U Váº¤N Äá»€:                                                             â”‚
     * â”‚ â€¢ Binary gap PHáº¢I náº±m giá»¯a hai sá»‘ 1                                         â”‚
     * â”‚ â€¢ Chuá»—i 0 á»Ÿ cuá»‘i (trailing zeros) KHÃ”NG Ä‘Æ°á»£c tÃ­nh                           â”‚
     * â”‚   VÃ­ dá»¥: 100100 â†’ gap há»£p lá»‡ lÃ  2 (giá»¯a hai sá»‘ 1), KHÃ”NG pháº£i lÃ  2 cuá»‘i     â”‚
     * â”‚                                                                             â”‚
     * â”‚ ğŸ’¡ Ã TÆ¯á»NG CHÃNH:                                                           â”‚
     * â”‚ â€¢ Duyá»‡t tá»«ng bit cá»§a sá»‘ N tá»« pháº£i sang trÃ¡i                                 â”‚
     * â”‚ â€¢ Khi gáº·p bit 1 Ä‘áº§u tiÃªn â†’ báº¯t Ä‘áº§u Ä‘áº¿m gap                                  â”‚
     * â”‚ â€¢ Khi gáº·p bit 0 â†’ tÄƒng bá»™ Ä‘áº¿m gap hiá»‡n táº¡i                                  â”‚
     * â”‚ â€¢ Khi gáº·p bit 1 tiáº¿p theo â†’ cáº­p nháº­t max gap, reset bá»™ Ä‘áº¿m                  â”‚
     * â”‚                                                                             â”‚
     * â”‚ ğŸ“Š MINH Há»ŒA Vá»šI N = 1041:                                                   â”‚
     * â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
     * â”‚ â”‚ Binary: 1 0 0 0 0 0 1 0 0 0 1                                           â”‚ â”‚
     * â”‚ â”‚ Index:  10 9 8 7 6 5 4 3 2 1 0                                          â”‚ â”‚
     * â”‚ â”‚                                                                         â”‚ â”‚
     * â”‚ â”‚ Bit 0: 1 â†’ báº¯t Ä‘áº§u Ä‘áº¿m, currentGap = 0                                  â”‚ â”‚
     * â”‚ â”‚ Bit 1: 0 â†’ currentGap = 1                                               â”‚ â”‚
     * â”‚ â”‚ Bit 2: 0 â†’ currentGap = 2                                               â”‚ â”‚
     * â”‚ â”‚ Bit 3: 0 â†’ currentGap = 3                                               â”‚ â”‚
     * â”‚ â”‚ Bit 4: 1 â†’ maxGap = max(0, 3) = 3, reset currentGap = 0                 â”‚ â”‚
     * â”‚ â”‚ Bit 5: 0 â†’ currentGap = 1                                               â”‚ â”‚
     * â”‚ â”‚ Bit 6: 0 â†’ currentGap = 2                                               â”‚ â”‚
     * â”‚ â”‚ Bit 7: 0 â†’ currentGap = 3                                               â”‚ â”‚
     * â”‚ â”‚ Bit 8: 0 â†’ currentGap = 4                                               â”‚ â”‚
     * â”‚ â”‚ Bit 9: 0 â†’ currentGap = 5                                               â”‚ â”‚
     * â”‚ â”‚ Bit 10: 1 â†’ maxGap = max(3, 5) = 5, reset currentGap = 0                â”‚ â”‚
     * â”‚ â”‚                                                                         â”‚ â”‚
     * â”‚ â”‚ Káº¿t quáº£: maxGap = 5                                                     â”‚ â”‚
     * â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     * 
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ THUáº¬T TOÃN CHI TIáº¾T:                                                        â”‚
     * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     * â”‚ 1. Khá»Ÿi táº¡o maxGap = 0, currentGap = 0, started = false                     â”‚
     * â”‚ 2. While N > 0:                                                             â”‚
     * â”‚    a. Láº¥y bit cuá»‘i cÃ¹ng: bit = N & 1 (hoáº·c N % 2)                           â”‚
     * â”‚    b. Náº¿u bit == 1:                                                         â”‚
     * â”‚       - Náº¿u started == true: maxGap = max(maxGap, currentGap)               â”‚
     * â”‚       - started = true                                                      â”‚
     * â”‚       - currentGap = 0                                                      â”‚
     * â”‚    c. Náº¿u bit == 0 VÃ€ started == true:                                      â”‚
     * â”‚       - currentGap++                                                        â”‚
     * â”‚    d. N = N >> 1 (hoáº·c N / 2) Ä‘á»ƒ xá»­ lÃ½ bit tiáº¿p theo                        â”‚
     * â”‚ 3. Return maxGap                                                            â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     * 
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ Äá»˜ PHá»¨C Táº P:                                                                â”‚
     * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     * â”‚ â€¢ Thá»i gian: O(log N) - sá»‘ bit cá»§a N                                        â”‚
     * â”‚ â€¢ KhÃ´ng gian: O(1) - chá»‰ dÃ¹ng vÃ i biáº¿n                                      â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     * 
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ CÃC TRÆ¯á»œNG Há»¢P Äáº¶C BIá»†T (EDGE CASES):                                       â”‚
     * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     * â”‚ â€¢ N = 1 â†’ binary: 1 â†’ return 0 (chá»‰ cÃ³ 1 bit 1)                             â”‚
     * â”‚ â€¢ N = 2 â†’ binary: 10 â†’ return 0 (trailing zeros khÃ´ng tÃ­nh)                 â”‚
     * â”‚ â€¢ N = 5 â†’ binary: 101 â†’ return 1                                            â”‚
     * â”‚ â€¢ N = 15 â†’ binary: 1111 â†’ return 0 (khÃ´ng cÃ³ gap)                           â”‚
     * â”‚ â€¢ N = 32 â†’ binary: 100000 â†’ return 0 (chá»‰ cÃ³ 1 bit 1)                       â”‚
     * â”‚ â€¢ N lá»›n (Integer.MAX_VALUE) â†’ váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng                     â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     */
    public int binaryGap(int N) {
        int maxGap = 0;
        int currentGap = 0;
        boolean started = false;
        
        while (N > 0) {
            // Láº¥y bit cuá»‘i cÃ¹ng
            int bit = N & 1;
            
            if (bit == 1) {
                // Gáº·p bit 1
                if (started) {
                    // ÄÃ£ cÃ³ bit 1 trÆ°á»›c Ä‘Ã³ â†’ cáº­p nháº­t maxGap
                    maxGap = Math.max(maxGap, currentGap);
                }
                // Báº¯t Ä‘áº§u Ä‘áº¿m gap má»›i
                started = true;
                currentGap = 0;
            } else if (started) {
                // Gáº·p bit 0 vÃ  Ä‘Ã£ báº¯t Ä‘áº§u Ä‘áº¿m
                currentGap++;
            }
            
            // Shift right Ä‘á»ƒ xá»­ lÃ½ bit tiáº¿p theo
            N >>= 1;
        }
        
        return maxGap;
    }
    
    /**
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     * â”‚ CÃCH GIáº¢I KHÃC: Sá»­ dá»¥ng Integer.toBinaryString()                           â”‚
     * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     * â”‚ Æ¯u Ä‘iá»ƒm: Dá»… Ä‘á»c, dá»… hiá»ƒu                                                   â”‚
     * â”‚ NhÆ°á»£c Ä‘iá»ƒm: Tá»‘n thÃªm bá»™ nhá»› Ä‘á»ƒ lÆ°u string                                  â”‚
     * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     */
    public int binaryGapUsingString(int N) {
        String binary = Integer.toBinaryString(N);
        int maxGap = 0;
        int currentGap = 0;
        boolean started = false;
        
        for (char c : binary.toCharArray()) {
            if (c == '1') {
                if (started) {
                    maxGap = Math.max(maxGap, currentGap);
                }
                started = true;
                currentGap = 0;
            } else if (started) {
                currentGap++;
            }
        }
        
        return maxGap;
    }
    
    // ================================ TESTS ================================
    
    @Test
    void testBinaryGap_Example1() {
        // 1041 = 10000010001 â†’ gap = 5
        assertEquals(5, binaryGap(1041));
    }
    
    @Test
    void testBinaryGap_Example2() {
        // 15 = 1111 â†’ no gap
        assertEquals(0, binaryGap(15));
    }
    
    @Test
    void testBinaryGap_Example3() {
        // 32 = 100000 â†’ no complete gap (trailing zeros)
        assertEquals(0, binaryGap(32));
    }
    
    @Test
    void testBinaryGap_Example4() {
        // 529 = 1000010001 â†’ gap = 4
        assertEquals(4, binaryGap(529));
    }
    
    @Test
    void testBinaryGap_Simple() {
        // 5 = 101 â†’ gap = 1
        assertEquals(1, binaryGap(5));
        // 9 = 1001 â†’ gap = 2
        assertEquals(2, binaryGap(9));
    }
    
    @Test
    void testBinaryGap_EdgeCases() {
        // Single bit
        assertEquals(0, binaryGap(1));
        assertEquals(0, binaryGap(2));
        // 20 = 10100 â†’ gap = 1
        assertEquals(1, binaryGap(20));
    }
}
